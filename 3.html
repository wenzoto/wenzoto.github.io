<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
 <h1> 23345 </h1>
 <button onclick="s1()">s1</button>
 <br />
 <button onclick="s2()">s2</button>
</body>
<script>

    const url = `https://popup.sandsiv.com/post-endpoint`;
    window.obb = {
        key1: "value1",
        key2: "value2"
    }

    debugger

    function s1() {
        fetch(url, {
            method: 'POST',
            mode: 'no-cors', // Додаємо це
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify( window.obb)
        })
            .then(response => response.json())
            .then(data => {
                console.log('---------data---------', data)
            })
            .catch(error => console.error("error", error));
    }


    function s2() {


        const xhr = new XMLHttpRequest();
        xhr.open('POST', url, true);
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onload = () => {
            debugger
            if (xhr.status >= 200 && xhr.status < 300) {
                console.log('Відповідь від сервера:', xhr.responseText);
            } else {
                console.error('Сталася помилка:', xhr.statusText);
            }
        };

        xhr.onerror = (e) => {
            console.error('Помилка мережі', e);
        };

        const jsonData = JSON.stringify(window.obb);
        xhr.send(jsonData);


    }


</script>
</html>
