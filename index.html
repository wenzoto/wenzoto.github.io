<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="./digi_runner.js"></script>
<!--    <script src="https://copy-customdemo-astra.surv.biz/digi_runner.js"></script>-->
</head>
<body> test runner 1.0 </body>
<script>
    window.VocSignal_ListenEvent('SentAnswerCallback', (data) => {
        if(data[0].id === 17230 && data[0]?.answerValue) {

            const options = {
                method: 'GET',
                headers: {
                    'Accept': 'application/json'
                }
            }

            fetch(`https://api.geocode.earth/v1/autocomplete?api_key=ge-59cb631a17779ea6&text=${data[0].answerValue}&size=1`, options)
                .then(response => console.log('---------response---------', response, '  ', response.json()))
                .then(commits => console.log('---------commits---------', commits))
                .catch(error => console.error('error:', error));


            //https://api.geocode.earth/v1/autocomplete?api_key=ge-59cb631a17779ea6&text=kyiv&size=1
            //https://api.geocode.earth/v1/autocomplete?api_key=ge-59cb631a17779ea6&text=kyiv&size=5&layers=-empire%2C-continent&client=ge-autocomplete-0.7.0
        }
    })

    function SetParameters() {
        let test = window.VocSignal_SendEvent && window.VocSignal_SendEvent('SetParameters', {
            apiUrl: 'https://stage2-astra.surv.biz',
            // apiUrl: 'http://localhost:8410',
            language: 'en',
            // customerId: 'zu66FVdAjdsAZi74',
            customerId: 'zu66FVdAjdsAZi74'+ Math.floor(Math.random() * Math.floor(9999)),
            surveyId: 4644//980 //1059
        });
    }

    SetParameters()

</script>
</html>
